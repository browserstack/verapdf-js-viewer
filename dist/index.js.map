{"version":3,"file":"index.js","sources":["../src/enums/treeBboxSelectionMode.ts","../src/components/viewerContext/ViewerContext.tsx","../src/components/bbox/Bbox.tsx","../src/services/bboxService.ts","../src/services/constants.ts","../src/components/pdfPage/PdfPage.tsx","../src/components/pdfDocument/PdfDocument.tsx","../src/index.tsx"],"sourcesContent":["export enum TreeBboxSelectionMode {\n    SELECTED = 'SELECTED',\n    SELECTED_WITH_KIDS = 'SELECTED_WITH_KIDS',\n};\n","import React, { FC, createContext, useState, ReactNode, ReactElement } from 'react';\nimport { IRenderBboxProps } from \"../bbox/Bbox\";\n\nexport const ViewerContext = createContext({} as {\n  page: number,\n  setPage(page: number): void,\n  maxPage: number,\n  setMaxPage(page: number): void,\n  scrollIntoPage: number,\n  setScrollIntoPage(page: number): void,\n  renderBbox?: (props: IRenderBboxProps) => ReactElement,\n});\n\nconst ViewerProvider: FC<{children: ReactNode, renderBbox?: (props: IRenderBboxProps) => ReactElement}> = ({renderBbox, children}) => {\n  const [page, setPage] = useState(1);\n  const [scrollIntoPage, setScrollIntoPage] = useState<number>(0);\n  const [maxPage, setMaxPage] = useState(0);\n\n  const context = {\n    page,\n    setPage,\n    maxPage,\n    setMaxPage,\n    scrollIntoPage,\n    setScrollIntoPage,\n    renderBbox,\n  };\n\n  return <ViewerContext.Provider value={context}>{children}</ViewerContext.Provider>;\n};\n\nexport default ViewerProvider;\n","import React, { FC, memo, useContext, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { TreeBboxSelectionMode } from '../../enums/treeBboxSelectionMode';\nimport { ViewerContext } from \"../viewerContext/ViewerContext\";\n\nimport './bbox.scss';\n\nconst bboxBorder = 'grey';\nconst bboxRelatedBorder = 'rgba(255,176,0,0.5)';\nconst bboxStructuredBorder = 'rgba(255,255,255,0)';\nconst bboxSelectedStructuredBorder = 'rgba(255,122,0,1)';\n\nconst bboxBorderHover = 'orangered';\nconst bboxStructuredBorderHover = 'rgba(255,122,0,1)';\n\nconst bboxBg = 'rgba(255,255,255,0)';\nconst bboxBgSelected = 'rgba(255,69,0,0.5)';\nconst bboxBgRelated = 'rgba(255,176,0,0.3)';\nconst bboxBgStructured = 'rgba(255,255,255,0)';\nconst bboxBgSelectedStructured = 'rgba(255,100,0,0.4)';\n\nexport interface IBbox {\n  location: (number | string)[];\n  id: string,\n  isVisible?: boolean;\n  index?: number;\n  groupId?: string;\n  bboxTitle?: string;\n  mcidList?: number[];\n  glyphIndex?: number;\n  annotIndex?: number;\n  operatorIndex?: number;\n  contentItemPath?: number[];\n  area?: number,\n}\n\nexport interface IMcidItem {\n  mcid: number;\n  pageIndex: number;\n}\n\nexport interface IAnnotItem {\n  pageIndex: number;\n  annotIndex: number;\n  rect: number[];\n}\n\nexport interface IColorScheme {\n  border?: string;\n  borderHovered?: string;\n  borderSelected?: string;\n  borderRelated?: string;\n  borderStructured?: string;\n  borderSelectedStructured?: string;\n  background?: string;\n  backgroundHovered?: string;\n  backgroundSelected?: string;\n  backgroundRelated?: string;\n  backgroundStructured?: string;\n  backgroundSelectedStructured?: string;\n}\n\ninterface IBboxProps {\n  bbox: IBbox;\n  disabled: boolean;\n  selected?: boolean;\n  related?: boolean;\n  structured?: boolean;\n  scale: number;\n  colorScheme?: IColorScheme;\n  selectionMode?: TreeBboxSelectionMode;\n  onClick?(e: any): void;\n}\n\nexport interface IRenderBboxProps {\n  left: string;\n  width: string;\n  height: string;\n  top: string;\n  disabled: boolean;\n  related?: boolean;\n  selected?: boolean;\n  structured?: boolean;\n  scale: number;\n  colorScheme?: IColorScheme;\n  selectionMode?: TreeBboxSelectionMode;\n  onClick?(e: any): void;\n}\n\ninterface IBboxDivProps {\n  left: string;\n  bottom: string;\n  width: string;\n  height: string;\n  top?: string;\n  colorScheme?: IColorScheme;\n}\n\nexport type TreeElementBbox = [Array<IMcidItem | undefined>, string];\n\nconst BboxDiv = styled.div`\n  left: ${(props: IBboxDivProps) => props.left};\n  bottom: ${(props: IBboxDivProps) => props.bottom};\n  height: ${(props: IBboxDivProps) => props.height};\n  width: ${(props: IBboxDivProps) => props.width};\n  top: ${(props: IBboxDivProps) => props.top};\n  border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.border || bboxBorder};\n  background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.background || bboxBg};\n  &:hover {\n    border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.borderHovered || bboxBorderHover};\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.backgroundHovered || bboxBg};\n  }\n  &.pdf-bbox_selected {\n    border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.borderSelected || bboxBorderHover};\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.backgroundSelected || bboxBgSelected};\n  }\n  &.pdf-bbox_related {\n    border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.borderRelated || bboxRelatedBorder};\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.backgroundRelated || bboxBgRelated};\n  }\n  &.pdf-bbox_structured {\n    &:hover {\n      border-color: ${bboxStructuredBorderHover};\n    }\n    border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.borderStructured || bboxStructuredBorder};\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.backgroundStructured || bboxBgStructured};\n  }\n  &.pdf-bbox_structured_selected {\n    border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.borderSelectedStructured || bboxSelectedStructuredBorder};\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.backgroundSelectedStructured || bboxBgSelectedStructured};\n  }\n  &.pdf-bbox_structured_selected_multiple {\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.background || bboxBg};\n  }\n`;\n\nconst Bbox: FC<IBboxProps> = (props: IBboxProps) => {\n  const {\n    bbox,\n    disabled,\n    selected,\n    related,\n    structured,\n    scale,\n    colorScheme,\n    selectionMode,\n    onClick,\n  } = props;\n  const { renderBbox } = useContext(ViewerContext);\n\n  const [left, bottom, width, height, top] = useMemo(() => {\n    return [\n      (parseFloat(bbox.location[0] as string) * scale) + 'px',\n      (bbox.location[3] === 'bottom'\n          ? '0'\n          : (parseFloat(bbox.location[1] as string) * scale) + 'px'),\n      (parseFloat(bbox.location[2] as string) * scale) + 'px',\n      (bbox.location[3] === 'top'\n          ? 'auto'\n          : (parseFloat(bbox.location[3] as string) * scale) + 'px'),\n      bbox.location[3] === 'top'\n          ? '0' : bbox.location[3] === 'bottom'\n              ? `calc(100% - ${parseFloat(bbox.location[1] as string) * scale}px)`\n              : 'auto',\n    ]\n  }, [bbox.location, scale]);\n\n  const isSelected = useMemo(() => selected ? ' pdf-bbox_selected' : '', [selected]);\n  const isRelated = useMemo(() => related ? ' pdf-bbox_related' : '', [related]);\n  const isDisabled = useMemo(() => disabled ? ' pdf-bbox_disabled' : '', [disabled]);\n  const isStructured = useMemo(() => structured ? ' pdf-bbox_structured' : '', [structured]);\n  const isStructuredSelected = useMemo(() => structured && selected ? ' pdf-bbox_structured_selected' : '', [structured, selected]);\n  const isStructuredSelectedMultiple = useMemo(() => {\n    if (structured && selected && selectionMode === TreeBboxSelectionMode.SELECTED_WITH_KIDS) return ' pdf-bbox_structured_selected_multiple';\n    else return '';\n  }, [structured, selected, selectionMode]);\n\n  if (renderBbox) {\n    return renderBbox({\n      left,\n      width,\n      height,\n      top,\n      colorScheme,\n      disabled,\n      related,\n      selected,\n      scale,\n      selectionMode,\n      structured,\n      onClick,\n    });\n  }\n\n  return <BboxDiv className={`pdf-bbox${isSelected}${isRelated}${isStructured}${isStructuredSelected}${isStructuredSelectedMultiple}${isDisabled}`}\n                  left={left}\n                  bottom={bottom}\n                  width={width}\n                  height={height}\n                  top={top}\n                  colorScheme={colorScheme || {}}\n                  title={bbox.bboxTitle}\n                  aria-describedby={bbox.bboxTitle}\n                  onClick={onClick}\n  />;\n}\n\nexport default memo(Bbox);\n","import _ from 'lodash';\n\nimport { IBboxLocation } from '../index';\nimport { AnyObject, OrNull } from '../types/generics';\nimport { IBbox, IMcidItem, IAnnotItem, TreeElementBbox} from '../components/bbox/Bbox';\n\nconst groupChildren = (children: AnyObject[]): AnyObject[][] => {\n  if (_.isNil(children)) children = [];\n  const group = _.groupBy(cleanArray(children), (child) => {\n    if (child.hasOwnProperty('name')) return 'nodeList';\n    if (child.hasOwnProperty('mcid')) return 'mcidList';\n    if (child.hasOwnProperty('rect')) return 'annotList';\n    return null;\n  });\n  return [\n    group.nodeList ?? [],\n    group.mcidList ?? [],\n    group.annotList ?? [],\n  ];\n};\n\nconst getMultiBboxPagesObj = (mcidList: Array<IMcidItem | undefined>): AnyObject => {\n  const mcidListPages = [] as number[];\n  const multiBbox = {};\n  mcidList.forEach(obj => {\n    if (!_.isNil(obj)) mcidListPages.push(obj.pageIndex)\n  });\n  const mcidListPagesDict = Array.from(new Set(mcidListPages));\n  for (const value of mcidListPagesDict) {\n    multiBbox[value + 1] = [];\n  }\n  mcidListPages.forEach((page, index) => multiBbox[page + 1].push(mcidList[index]));\n  return multiBbox;\n};\n\nconst extractMcidFromNode = (children: AnyObject | AnyObject[] | null): AnyObject[] => {\n  if (_.isNil(children)) return [];\n  const mcidList = [];\n  if (!(children instanceof Array)) {\n    children.hasOwnProperty('mcid') && mcidList.push(children);\n  } else {\n    mcidList.push(..._.filter(children, (child: AnyObject) => child?.hasOwnProperty('mcid')));\n  }\n  return mcidList;\n};\n\nconst updateMcidList = (oldMcidList: AnyObject[], children: AnyObject[]): AnyObject[] => {\n  if (_.isNil(oldMcidList)) oldMcidList = [];\n  if (_.isNil(children)) children = [];\n  return [\n    ...oldMcidList,\n    ..._.flatMap(cleanArray(children), child => {\n      if (child.hasOwnProperty('mcidList') && !_.isNil(child.mcidList)) {\n        return child.mcidList;\n      }\n    }),\n  ];\n};\n\nexport const cleanArray = (arr: Array<AnyObject | null>): AnyObject[] => {\n  if (_.isNil(arr)) return [];\n  return arr.filter(el => !_.isNil(el)) as AnyObject[];\n};\n\nexport const getFormattedAnnotations = (annots: AnyObject): AnyObject[] => {\n  type parentAnnot = {\n    id: string,\n    rect: number[],\n  };\n  const formattedAnnots = [] as AnyObject;\n\n  _.forEach(annots, (annot: any) => {\n    if (annot.hasOwnProperty('parentId')\n      && annot.hasOwnProperty('parentRect')\n      && annot.hasOwnProperty('parentType')\n      && annot.parentType === 'Highlight') {\n      formattedAnnots.push({\n        ['id']: annot.parentId,\n        ['rect']: annot.parentRect,\n      });\n    }\n    formattedAnnots.push(annot);\n  });\n\n  return formattedAnnots.sort(({ id: id1 }: parentAnnot, { id: id2 }: parentAnnot) => {\n    return parseInt(id1) > parseInt(id2) ? 1 : -1;\n  });\n}\n\nconst annotIndexRegExp = /\\/annots\\[(?<annotIndex>\\d+)\\](\\(.*\\))?\\//;\nexport const buildBboxMap = (bboxes: IBboxLocation[], structure: AnyObject) => {\n  const bboxMap = {};\n  bboxes.forEach((bbox, index) => {\n    try {\n      if (_.isNil(bbox.location)) return;\n      const match = bbox.location.match(annotIndexRegExp);\n      const annotIndex = parseInt(match?.groups?.annotIndex!, 10);\n      if (bbox.location.includes('contentStream') && bbox.location.includes('operators')) {\n        const bboxPosition = calculateLocationInStreamOperator(bbox.location);\n        if (!bboxPosition) {\n          return;\n        }\n        bboxMap[bboxPosition.pageIndex + 1] = [\n          ...(bboxMap[bboxPosition.pageIndex + 1] || []),\n          {\n            index,\n            annotIndex: Number.isNaN(annotIndex) ? undefined : annotIndex,\n            isVisible: bbox.hasOwnProperty('isVisible') ? bbox.isVisible : true,\n            operatorIndex: bboxPosition.operatorIndex,\n            glyphIndex: bboxPosition.glyphIndex,\n            bboxTitle: bbox.bboxTitle,\n          }\n        ];\n      } else if (bbox.location.includes('StructTreeRoot') || bbox.location.includes('root/doc') || bbox.location === 'root') {\n        const mcidData = getTagsFromErrorPlace(bbox.location, structure);\n        mcidData.forEach(([mcidList, pageIndex, contentItemPath]) => {\n          bboxMap[pageIndex + 1] = [\n            ...(bboxMap[pageIndex + 1] || []),\n            {\n              index,\n              annotIndex: Number.isNaN(annotIndex) ? undefined : annotIndex,\n              isVisible: bbox.hasOwnProperty('isVisible') ? bbox.isVisible : true,\n              mcidList,\n              contentItemPath,\n              groupId: bbox.groupId || undefined,\n              bboxTitle: bbox.bboxTitle,\n            },\n          ];\n        });\n      } else {\n        const bboxesFromLocation = bbox.location.includes('pages[') ? calculateLocation(bbox.location as string) : calculateLocationJSON(bbox.location as string);\n        bboxesFromLocation.forEach((bboxWithLocation: IBboxLocation) => {\n          bboxMap[bboxWithLocation.page] = [\n            ...(bboxMap[bboxWithLocation.page] || []),\n            {\n              index,\n              annotIndex: Number.isNaN(annotIndex) ? undefined : annotIndex,\n              isVisible: bbox.hasOwnProperty('isVisible') ? bbox.isVisible : true,\n              location: bboxWithLocation.location,\n              groupId: bbox.groupId || undefined,\n              bboxTitle: bbox.bboxTitle,\n            },\n          ];\n        })\n      }\n    } catch (e) {\n      console.error(`Location not supported: ${bbox.location}`);\n    }\n  });\n  return bboxMap;\n}\n\nexport const parseTree = (tree: AnyObject | AnyObject[]): AnyObject => {\n  if (tree instanceof Array && tree.length === 1) {\n    return tree[0];\n  }\n  if (tree instanceof Array) {\n    return { name: 'Document', children: tree };\n  }\n  return tree;\n};\n\nexport const structurizeTree = (node: AnyObject): OrNull<AnyObject> => {\n  if (_.isNil(node)) return null;\n  if (_.isNil(node.children)) {\n    if (node.hasOwnProperty('name')) return node;\n    return null;\n  }\n  if (!(node.children instanceof Array)) {\n    if (node.children.hasOwnProperty('mcid')) {\n      node.mcidListChildren = extractMcidFromNode(node.children);\n      node.mcidList = [node.children];\n      node.children = [];\n    } else if (node.children.hasOwnProperty('rect')) {\n      node.annotList = [node.children];\n      node.children = [];\n    } else {\n      node.children = [structurizeTree(node.children)];\n      node.mcidList = updateMcidList(node.mcidList, node.children);\n    }\n  } else {\n    const mcidListChildren = [] as AnyObject[];\n    const [nodeList, mcidList, annotList] = groupChildren(node.children);\n    _.forEach(node.children, (child: OrNull<AnyObject>) =>\n      mcidListChildren.push(...extractMcidFromNode(child))\n    );\n    node.mcidListChildren = mcidListChildren;\n    node.children = _.map(nodeList, child => structurizeTree(child));\n    node.mcidList = updateMcidList(mcidList, node.children);\n    if (annotList.length) {\n      node.annotList = annotList;\n    }\n  }\n  node.children = cleanArray(node.children);\n  return node;\n};\n\nexport const setTreeIds = (node: AnyObject, annotMap: AnyObject = {}, id: string = '0'): [OrNull<AnyObject>, AnyObject] => {\n  if (_.isNil(node)) return [null, annotMap];\n  node.id = id;\n  if (node?.hasOwnProperty('annotList')) {\n    node.annotList.forEach((annot: IAnnotItem) => {\n      const index = `${annot.pageIndex}:${annot.annotIndex}`;\n      annotMap[index] = id;\n    });\n  }\n  if (_.isNil(node?.children)) node.children = [];\n  if (!node?.children.length) {\n    node.final = true;\n    return [node, annotMap];\n  }\n  if (!(node.children instanceof Array)) node.children = [setTreeIds(node.children, annotMap, `${id}:0`)[0]];\n  else node.children = _.map(node.children, (child, index) => setTreeIds(child, annotMap, `${id}:${index}`)[0]);\n  return [node, annotMap];\n};\n\nexport const getMcidList = (node: AnyObject, mcidList: TreeElementBbox[] = []): TreeElementBbox[] => {\n  if (_.isNil(node)) return mcidList;\n  if (!_.isNil(node.mcidList) && !_.isNil(node.id) && node.mcidList.length) mcidList.push([node.mcidList, node.id]);\n  if (_.isNil(node.children)) return mcidList;\n  if (!(node.children instanceof Array)) mcidList.push([node.children.mcidList, node.children.id]);\n  else _.map(node.children, child => (mcidList = getMcidList(child, mcidList)));\n  return mcidList;\n};\n\nexport const createBboxMap = (mcidList: TreeElementBbox[]): AnyObject => {\n  const mcidListPages = [] as Array<number | number[]>;\n  const bboxMap = {};\n  const getPages = (list: Array<IMcidItem | undefined>): number[]  => {\n    const cleanedList = list.filter((obj): obj is IMcidItem => !_.isNil(obj) && !_.isNil(obj.pageIndex));\n    return Array.from(new Set(cleanedList.map(obj => obj?.pageIndex)));\n  };\n  mcidList.forEach(arr => {\n    const list = arr[0];\n    const pages = getPages(list);\n    mcidListPages.push(pages.length === 1 ? pages[0] : pages);\n  });\n  const mcidListPagesDict = Array.from(new Set(mcidListPages.flat()));\n  for (const value of mcidListPagesDict) {\n    bboxMap[value + 1] = [];\n  }\n  mcidListPages.forEach((page, index) => {\n    if (!(page instanceof Array)) bboxMap[page + 1].push(mcidList[index]);\n    else {\n      const [mcid, id] = mcidList[index];\n      const multiBboxPagesObj = getMultiBboxPagesObj(mcid);\n      page.forEach(pageIndex => bboxMap[pageIndex + 1].push([multiBboxPagesObj[pageIndex + 1], id]))\n    };\n  });\n  return bboxMap;\n};\n\nexport const createAllBboxes = (bboxesAll: TreeElementBbox[] | undefined, pageMap: AnyObject, annotations: AnyObject, viewport: number[], rotateAngle: number): IBbox[] => {\n  if (_.isNil(bboxesAll)) return [];\n  const unfilteredBboxes = bboxesAll?.map((bbox) => {\n    const [mcid, id] = bbox as [AnyObject[], string];\n    const listOfMcid = cleanArray(mcid).map((obj: AnyObject) => obj?.mcid);\n    const location = parseMcidToBbox(listOfMcid, pageMap, annotations, viewport, rotateAngle);\n    if (_.isEmpty(location)) {\n      return null;\n    }\n    const [,, width, height] = location;\n    return {\n      id,\n      location: location,\n      area: width * height,\n    };\n  });\n  return cleanArray(unfilteredBboxes).sort(\n    ({area: area1}, {area: area2}) => (area1 < area2) ? 1 : (area1 > area2) ? -1 : 0) as IBbox[];\n};\n\nexport const calculateLocationInStreamOperator = (location: string) => {\n  const path = location.split(\"/\");\n  let pageIndex = -1;\n  let operatorIndex = -1;\n  let glyphIndex = -1;\n  path.forEach((step) => {\n    if (step.startsWith('pages')) {\n      pageIndex = parseInt(step.split(/[\\[\\]]/)[1]);\n    }\n    if (step.startsWith('operators')) {\n      operatorIndex = parseInt(step.split(/[\\[\\]]/)[1]);\n    }\n    if (step.startsWith('usedGlyphs')) {\n      glyphIndex = parseInt(step.split(/[\\[\\]]/)[1]);\n    }\n  });\n  if (pageIndex === -1 || operatorIndex === -1 || glyphIndex === -1) {\n    return null;\n  }\n  return {\n    pageIndex,\n    operatorIndex,\n    glyphIndex,\n  }\n}\n\nexport const getSelectedPageByLocation = (bboxLocation: string) => {\n  const location = bboxLocation;\n  const path = location.split('/')\n  let pageNumber = -1;\n  if (location?.includes('pages') && path[path.length - 1].startsWith('pages')) {\n    location.split('/').forEach(nodeString => {\n      if (nodeString.includes('pages')) {\n        pageNumber = parseInt(nodeString.split(/[[\\]]/)[1], 10) + 1;\n      }\n    });\n  }\n  return pageNumber;\n}\n\nexport const getBboxPages = (bboxes: IBboxLocation[], structure: AnyObject) => {\n  return bboxes.map((bbox) => {\n    try {\n      if (bbox.location.includes('StructTreeRoot') || bbox.location.includes('root/doc') || bbox.location === 'root') {\n        const mcidData = getTagsFromErrorPlace(bbox.location, structure);\n        const pageIndex = mcidData[0][1];\n        return pageIndex + 1;\n      } else {\n        const bboxesFromLocation = bbox.location.includes('pages[') ? calculateLocation(bbox.location as string) : calculateLocationJSON(bbox.location as string);\n        return bboxesFromLocation.length ? bboxesFromLocation[0].page : 0;\n      }\n    } catch (e) {\n      console.error(`Location not supported: ${bbox.location}`);\n    }\n  });\n}\n\nexport const checkIsBboxOutOfThePage = (bbox: IBbox, scale: number, page: number) => {\n  const parent = (document.querySelector('.react-pdf__Page[data-page-number=\"' + page + '\"]') as any);\n  const parentHeight = parent.offsetHeight;\n  const parentWidth = parent.offsetWidth;\n\n  const left = parseFloat(bbox.location[0] as string) * scale;\n  const top = parseFloat(bbox.location[1] as string) * scale;\n  const width = parseFloat(bbox.location[2] as string) * scale;\n  const height = parseFloat(bbox.location[3] as string) * scale;\n\n  return (\n      top <= 0 && (top + height) <= 1 ||\n      left <= 0 && (left + width) <= 1 ||\n      parentHeight - top <= 1 && (top + height) >= parentHeight ||\n      parentWidth - left <= 1 && (left + width) >= parentWidth\n  );\n}\n\nconst calculateLocation = (location: string) => {\n  const bboxes = [];\n  const [pages, boundingBox] = location.split('/');\n  const [start, end] = pages.replace('pages[', '').replace(']', '').split('-');\n  const [x, y, x1, y1] = boundingBox.replace('boundingBox[', '').replace(']', '').split(',');\n  const width = parseFloat(x1) - parseFloat(x);\n\n  if (end) {\n    for (let i = parseInt(start) + 1; i <= parseInt(end) + 1; i++) {\n      switch (i) {\n        case parseInt(start) + 1:\n          bboxes.push({\n            page: i,\n            location: [parseFloat(x), parseFloat(y1), width, 'bottom'],\n          });\n          break;\n        case parseInt(end) + 1:\n          bboxes.push({\n            page: i,\n            location: [parseFloat(x), parseFloat(y), width, 'top'],\n          });\n          break;\n        default:\n          bboxes.push({\n            page: i,\n            location: [parseFloat(x), 0, width, 'top'],\n          });\n          break;\n      }\n    }\n  } else {\n    const height = parseFloat(y1) - parseFloat(y);\n    bboxes.push({\n      page: parseInt(start) + 1,\n      location: [parseFloat(x), parseFloat(y), width, height],\n    })\n  }\n\n  return bboxes;\n}\n\nconst calculateLocationJSON = (location: string) => {\n  const bboxes: AnyObject[] = [];\n  const bboxMap = JSON.parse(location);\n\n  bboxMap.bbox.forEach(({ p, rect }: {p: string, rect: string[]}) => {\n    const [x, y, x1, y1] = rect;\n    const width = parseFloat(x1) - parseFloat(x);\n    const height = parseFloat(y1) - parseFloat(y);\n    bboxes.push({\n      page: parseFloat(p) + 1,\n      location: [parseFloat(x), parseFloat(y), width, height],\n    });\n  });\n  return bboxes;\n}\n\nconst getTagsFromErrorPlace = (context: string, structure: AnyObject) => {\n  const defaultValue = [[[], -1, undefined]];\n  let selectedTag = convertContextToPath(context);\n\n  if (_.isEmpty(selectedTag)) {\n    return defaultValue;\n  }\n\n  if (selectedTag.hasOwnProperty('mcid') && selectedTag.hasOwnProperty('pageIndex')) {\n    return [[[selectedTag.mcid], selectedTag.pageIndex]];\n  } else if (selectedTag.hasOwnProperty('annot') && selectedTag.hasOwnProperty('pageIndex')) {\n    return [[{ annot: selectedTag.annot }, selectedTag.pageIndex]];\n  } else if (selectedTag.hasOwnProperty('contentItems')) {\n    return [[undefined, selectedTag.pageIndex, [\n      selectedTag.contentStream,\n      selectedTag.content,\n      ...selectedTag.contentItems\n    ]]];\n  } else if (selectedTag instanceof Array) {\n    let objectOfErrors = { ...structure };\n    selectedTag.forEach((node, index) => {\n      let nextStepObject;\n      if (!objectOfErrors.children) {\n        nextStepObject = objectOfErrors[node[0]];\n      } else if (!(objectOfErrors.children instanceof Array)) {\n        if (objectOfErrors.children.name === node[1]) {\n          nextStepObject = objectOfErrors.children;\n        } else {\n          nextStepObject = objectOfErrors;\n        }\n      } else {\n        if (objectOfErrors?.name === node[1] && index === 0) {\n          nextStepObject = objectOfErrors;\n        } else {\n          const clearedChildrenArray = [...objectOfErrors.children].filter((tag: AnyObject) => {\n            return !tag?.hasOwnProperty('mcid') && !tag?.hasOwnProperty('rect');\n          });\n          nextStepObject = { ...(clearedChildrenArray.length ? clearedChildrenArray : objectOfErrors.children)[node[0]] };\n        }\n      }\n\n      objectOfErrors = { ...nextStepObject };\n    });\n    return findAllMcid(objectOfErrors);\n  }\n  return defaultValue;\n}\n\n/*\n *  Convert returning from veraPDF api path to error in array of nodes\n *\n *  @param errorContext {string} ugly path to error\n *\n *  @return arrayOfNodes {array} of nodes from Document to error Tag\n */\nconst convertContextToPath = (errorContext = '') => {\n  let arrayOfNodes: AnyObject[] = [];\n  if (!errorContext) {\n    return arrayOfNodes;\n  }\n\n  let contextString: string | string[] = errorContext;\n\n  try {\n    if (contextString.includes('contentItem') && !contextString.includes('mcid')) {\n      const result: any = contextString.match(\n        /pages\\[(?<pages>\\d+)\\](\\(.+\\))?\\/(annots\\[(?<annots>\\d+)\\](\\(.+\\))?\\/appearance\\[\\d\\](\\(.+\\))?\\/)?contentStream\\[(?<contentStream>\\d+)\\](\\(.+\\))?\\/content\\[(?<content>\\d+)\\](?<contentItems>((\\(.+\\))?\\/contentItem\\[(\\d+)\\])+)/\n      );\n      if (result) {\n        try {\n          let path: AnyObject = {};\n          path.pageIndex = parseInt(result.groups.pages, 10);\n          path.contentStream = parseInt(result.groups.contentStream, 10);\n          path.content = parseInt(result.groups.content, 10);\n          path.contentItems = result.groups.contentItems.split('/').filter((ci: any) => ci.includes('contentItem')).map((ci: any) => {\n            const contentItemIndex = ci.match(/\\[(?<contentItem>\\d+)\\]/);\n            return parseInt(contentItemIndex?.groups?.contentItem || '-1', 10);\n          });\n          path.annotIndex = parseInt(result.groups.annots, 10) || undefined;\n          return path;\n        } catch (err) {\n          console.log('NoMCIDContentItemPathParseError:', err.message || err);\n        }\n      }\n    }\n\n    if (contextString.includes('contentItem')) {\n      let path: AnyObject = {};\n      contextString.split('/').forEach(nodeString => {\n        if (nodeString.includes('page')) {\n          path.pageIndex = parseInt(nodeString.split(/[[\\]]/)[1], 10);\n        } else if (nodeString.includes('contentItem') && nodeString.includes('mcid')) {\n          path.mcid = parseInt(nodeString.split('mcid:')[1].slice(0, -1), 10);\n        }\n      });\n      return path;\n    } else if (contextString.includes('annots')) {\n      let path: AnyObject = {};\n      contextString.split('/').forEach(nodeString => {\n        if (nodeString.includes('page')) {\n          path.pageIndex = parseInt(nodeString.split(/[[\\]]/)[1], 10);\n        } else if (nodeString.includes('annots')) {\n          path.annot = parseInt(nodeString.split(/[[\\]]/)[1], 10);\n        }\n      });\n      return path;\n    }\n\n    contextString = contextString.split('PDStructTreeRoot)/')[1].split('/'); // cut path before start of Document\n\n    contextString.forEach(nodeString => {\n      const nextIndex = parseInt(nodeString.split('](')[0].split('K[')[1], 10);\n      let nextTag: string | string[] = nodeString\n        .split('(')[1]\n        .split(')')[0]\n        .split(' ');\n      nextTag = nextTag[nextTag.length - 1];\n\n      arrayOfNodes = [...arrayOfNodes, [nextIndex, nextTag]];\n    });\n\n    return arrayOfNodes;\n  } catch (e) {\n    return [];\n  }\n}\n\n/*\n *  Going through object of tags from error placement and return array of its MCIDs\n *\n *  @param {Object} of tags\n *\n *  @return [[{Array}, {Number}]] - [[[array of mcids], page of error]]\n */\nfunction findAllMcid(tagObject: AnyObject) {\n  const mcidMap: any = {};\n\n  function func(obj: AnyObject) {\n    if (!obj) return;\n    if (obj.mcid || obj.mcid === 0) {\n      if (!mcidMap[obj.pageIndex]) mcidMap[obj.pageIndex] = [];\n      mcidMap[obj.pageIndex].push(obj.mcid);\n    }\n    if (!obj.children) {\n      return;\n    }\n\n    if (!(obj.children instanceof Array)) {\n      func(obj.children);\n    } else {\n      [...obj.children].forEach(child => func(child));\n    }\n  }\n\n  func(tagObject);\n\n  return _.map(mcidMap, (value, key) => [value, _.toNumber(key)]);\n}\n\nexport const getBboxForGlyph = (\n  operatorIndex: number,\n  glyphIndex: number,\n  operationsList: number[][][],\n  viewport: number[],\n  rotateAngle: number,\n  leftOffset: number,\n  bottomOffset: number,\n) => {\n  const bbox = operationsList[operatorIndex] ? operationsList[operatorIndex][glyphIndex] : null;\n  if (!bbox) {\n    return [];\n  }\n  const coords = [...bbox];\n  coords[0] += leftOffset;\n  coords[1] += bottomOffset;\n  const coordsArray = rotateCoordinates(coords, rotateAngle, viewport);\n  const rotatedViewport = rotateViewport(rotateAngle, viewport);\n  return [coordsArray[0] - rotatedViewport[0], coordsArray[1] - rotatedViewport[1], coordsArray[2], coordsArray[3]];\n}\n\nexport const parseMcidToBbox = (\n  listOfMcid: number[] | AnyObject,\n  pageMap: AnyObject,\n  annotations: AnyObject,\n  viewport: number[],\n  rotateAngle: number,\n  leftOffset = 0,\n  bottomOffset = 0,\n) => {\n  let coords: AnyObject = {};\n\n  if (listOfMcid instanceof Array) {\n    listOfMcid.forEach(mcid => {\n      const currentBbox = pageMap[mcid];\n      if (\n        !_.isNil(currentBbox) &&\n        !_.isNaN(currentBbox.x) &&\n        !_.isNaN(currentBbox.y) &&\n        !_.isNaN(currentBbox.width) &&\n        !_.isNaN(currentBbox.height)\n      ) {\n        coords = concatBoundingBoxes(currentBbox, coords.hasOwnProperty('x') ? coords : undefined);\n      }\n    });\n  } else if (listOfMcid.hasOwnProperty('annot')) {\n    const rect = annotations[listOfMcid.annot]?.rect;\n    if (rect) {\n      coords = {\n        x: rect[0],\n        y: rect[1],\n        width: Math.abs(rect[0] - rect[2]),\n        height: Math.abs(rect[1] - rect[3]),\n      };\n    }\n  }\n  if (!coords || _.isEmpty(coords)) return [];\n  const coordsArray = rotateCoordinates([\n    coords.x + leftOffset,\n    coords.y + bottomOffset,\n    coords.width,\n    coords.height,\n  ], rotateAngle, viewport);\n  const rotatedViewport = rotateViewport(rotateAngle, viewport);\n  return [coordsArray[0] - rotatedViewport[0], coordsArray[1] - rotatedViewport[1], coordsArray[2], coordsArray[3]];\n}\n\nexport const rotateViewport = (rotateAngle: number, viewport: number[]): number[] => {\n  if ([0, 180].includes(rotateAngle)) {\n    return viewport;\n  }\n  return [viewport[1], viewport[0], viewport[3], viewport[2]];\n}\n\nexport const rotateCoordinates = (coords: number[], rotateAngle: number, viewport: number[]): number[] => {\n  if (rotateAngle === 0) return coords;\n  const [x1, y1] = rotatePoint(rotateAngle, [coords[0], coords[1]], viewport);\n  const [x2, y2] = rotatePoint(rotateAngle, [coords[0] + coords[2], coords[1] + coords[3]], viewport);\n  return [Math.min(x1, x2), Math.min(y1, y2), Math.abs(x1 - x2), Math.abs(y1 - y2)];\n}\n\nexport const rotatePoint = (rotateAngle: number, point: number[], viewport: number[]): number[] => {\n  const rad = (rotateAngle * Math.PI) / 180;\n  let x = point[0] * Math.cos(rad) + point[1] * Math.sin(rad);\n  let y = -point[0] * Math.sin(rad) + point[1] * Math.cos(rad);\n  switch (rotateAngle) {\n    case 90:\n      y += viewport[2] + viewport[0];\n      break;\n    case 180:\n      x += viewport[2] + viewport[0];\n      y += viewport[3] + viewport[1];\n      break;\n    case 270:\n      x += viewport[3] + viewport[1];\n      break;\n    default:\n      break;\n  }\n  return [x, y];\n}\n\nexport const activeBboxInViewport = (): boolean => {\n  let isInView = false;\n  const bboxes = document.querySelectorAll('.pdf-bbox_selected');\n  for (let index = 0; index < bboxes.length; index++) {\n    isInView = elementInViewport(bboxes[index]);\n    if (isInView) {\n      break;\n    }\n  }\n\n  return isInView;\n}\n\nexport const scrollToActiveBbox = (): void => {\n  if (activeBboxInViewport()) {\n    return;\n  }\n  const el: any = document.querySelector('.pdf-bbox_selected');\n  if (!el) return;\n  el.scrollIntoView();\n  (document.querySelector('.pdf-viewer') as any).scrollTop -= 150;\n  if (!activeBboxInViewport()) {\n    el.scrollIntoView();\n  }\n}\n\nfunction elementInViewport (el: any): boolean {\n  let top = el.offsetTop;\n  let left = el.offsetLeft;\n  const width = el.offsetWidth;\n  const height = el.offsetHeight;\n  const elementArea = width * height;\n  while(el.offsetParent && !el.offsetParent.className.includes('pdf-viewer')) {\n    el = el.offsetParent;\n    top += el.offsetTop;\n    left += el.offsetLeft;\n  }\n  const parent = (document.querySelector('.pdf-viewer') as any);\n  const parentArea = parent.offsetWidth * parent.offsetHeight;\n  const parentScrollTop = parent.scrollTop as unknown as number;\n  const parentScrollLeft = parent.scrollLeft as unknown as number;\n  if (elementArea >= parentArea) {\n    return true;\n  }\n  return (\n    top >= parentScrollTop &&\n    left >= parentScrollLeft &&\n    (top + height) <= (parentScrollTop + parent.offsetHeight) &&\n    (left + width) <= (parentScrollLeft + parent.offsetWidth)\n  );\n}\n\nfunction concatBoundingBoxes(newBoundingBox: AnyObject, oldBoundingBox?: AnyObject): AnyObject {\n  if (_.isNil(oldBoundingBox) && _.isNil(newBoundingBox)) {\n    return {};\n  }\n\n  if (_.isNil(newBoundingBox) || Object.values(newBoundingBox).some((el) => _.isNil(el))) {\n    return oldBoundingBox || {};\n  }\n  if (_.isNil(oldBoundingBox)) {\n    return _.cloneDeep(newBoundingBox);\n  }\n  return {\n    x: Math.min(newBoundingBox.x, oldBoundingBox.x),\n    y: Math.min(newBoundingBox.y, oldBoundingBox.y),\n    width:\n      Math.max(newBoundingBox.x + newBoundingBox.width, oldBoundingBox.x + oldBoundingBox.width) -\n      Math.min(newBoundingBox.x, oldBoundingBox.x),\n    height:\n      Math.max(newBoundingBox.y + newBoundingBox.height, oldBoundingBox.y + oldBoundingBox.height) -\n      Math.min(newBoundingBox.y, oldBoundingBox.y),\n  };\n}\n","export const WARNING_CODES = {\n    BBOX_OUT_OF_THE_PAGE_VIEWPORT: 'BBOX_OUT_OF_THE_PAGE_VIEWPORT',\n};\n","import React, { FC, useCallback, useState, useRef, memo, useEffect, useContext, useMemo } from 'react';\nimport { Page } from 'react-pdf';\nimport { PageCallback } from 'react-pdf/src/shared/types';\nimport { useIntersection } from 'use-intersection';\nimport styled from 'styled-components';\nimport _ from 'lodash';\n\nimport Bbox, { IBbox, IColorScheme, TreeElementBbox } from '../bbox/Bbox';\nimport { IPageProps } from './IPageProps';\nimport { ViewerContext } from '../viewerContext/ViewerContext';\nimport { TreeBboxSelectionMode } from '../../enums/treeBboxSelectionMode';\nimport { AnyObject } from '../../types/generics';\nimport {\n  cleanArray,\n  getBboxForGlyph,\n  parseMcidToBbox,\n  createAllBboxes,\n  checkIsBboxOutOfThePage,\n  getFormattedAnnotations\n} from '../../services/bboxService';\nimport { WARNING_CODES } from '../../services/constants';\n\nimport './pdfPage.scss';\n\ninterface IPdfPageProps extends IPageProps {\n  bboxList?: IBbox[];\n  treeElementsBboxes?: TreeElementBbox[];\n  treeBboxSelectionMode?: TreeBboxSelectionMode;\n  isTreeBboxesVisible: boolean;\n  defaultHeight?: number;\n  defaultWidth?: number;\n  structure?: AnyObject;\n  colorScheme?: IColorScheme;\n  groupId?: string;\n  onPageInViewport?(page: number, data: { isIntersecting?: boolean, intersectionRatio?: number }): void;\n  isPageSelected?: boolean;\n  onWarning?(warningCode: string): void;\n  pageIntersectionThreshold?: number[];\n}\n\ninterface IStyledPdfPageProps {\n  height?: number;\n  width?: number;\n  scale: number;\n  colorScheme?: IColorScheme;\n}\n\nconst bboxBorderHover = 'orangered';\n\nconst StyledPdfPage = styled.div`\n  min-height: ${(props: IStyledPdfPageProps) => props.height ? props.height*props.scale + 'px' : 'auto'};\n  min-width: ${(props: IStyledPdfPageProps) => props.width ? props.width*props.scale + 'px' : 'auto'};\n  &.pdf-page_selected {\n    outline-color: ${(props: IStyledPdfPageProps) => props.colorScheme && props.colorScheme.borderSelected || bboxBorderHover};\n  }\n`;\n\nconst PdfPage: FC<IPdfPageProps> = (props) => {\n  const { scrollIntoPage } = useContext(ViewerContext);\n  const { bboxList = [], scale = 1, pageIntersectionThreshold = [.2, .4, .5, .6, .8, 1] } = props;\n  const intersectionRef = useRef(null);\n  const [bboxesAll, setBboxesAll] = useState<IBbox[]>([]);\n  const [bboxesErrors, setBboxesErrors] = useState<Array<IBbox | null>>([]);\n  const [loaded, setLoaded] = useState(false);\n  const [pageScale, setPageScale] = useState(scale);\n  const [pageViewport, setPageViewport] = useState<number[]>([]);\n  const [isRendered, setIsRendered] = useState(false);\n  const [isIntersecting, setIsIntersecting] = useState(false);\n  const [intersectionRatio, setIntersectionRatio] = useState(0);\n  const pageRef = useRef<PageCallback | null>(null);\n  const prevBboxList = useRef<IBbox[]>([]);\n  useIntersection(intersectionRef, {\n    threshold: pageIntersectionThreshold,\n  }, (entry) => {\n    if (isIntersecting !== entry.isIntersecting) {\n      setIsIntersecting(entry.isIntersecting);\n    }\n    if (intersectionRatio !== entry.intersectionRatio) {\n      setIntersectionRatio(entry.intersectionRatio);\n    }\n  });\n\n  const onPageClick = useCallback(() => {\n    props.onBboxClick?.(null);\n  }, []);\n  const onBboxClick = useCallback((index: any, id: any) => (e: Event) => {\n    e.stopPropagation();\n    props.onBboxClick?.({ index, id });\n  }, [props.onBboxClick]);\n  const onPageRenderSuccess = useCallback(() => {\n    setIsRendered(true);\n    props.onPageRenderSuccess?.();\n    document.querySelectorAll('.pdf-page_rendered img')?.forEach((img: any) => {\n      if (img.alt.includes('Annotation')) {\n        const index = img.src.lastIndexOf('/') + 1;\n        const name = img.src.substr(index);\n        img.src = require(`pdfjs-dist/web/images/${name}`) || img.src;\n      }\n    });\n  }, []);\n  const createBBoxes = useCallback((page: PageCallback) => {\n    Promise.all([page.getOperatorList(), page.getAnnotations()]).then(([operatorList, annotations]) => {\n      const annotBBoxesAndOpPos = operatorList.argsArray[operatorList.argsArray.length - 3];\n      const operationData = operatorList.argsArray[operatorList.argsArray.length - 2];\n      const [positionData, noMCIDData] = operatorList.argsArray[operatorList.argsArray.length - 1];\n      const annotsFormatted = getFormattedAnnotations(annotations);\n      const allBboxes = createAllBboxes(props.treeElementsBboxes, positionData, annotsFormatted, page.view, page.rotate);\n      const errorBboxes = bboxList.map((bbox) => {\n        let opData = operationData,\n            posData = positionData,\n            nMcidData = noMCIDData;\n        let left = 0, bottom = 0;\n        const { annotIndex } = bbox;\n        if (annotIndex != null) {\n          left = annotations[annotIndex]?.rect[0] ?? 0;\n          bottom = annotations[annotIndex]?.rect[1] ?? 0;\n          opData = annotBBoxesAndOpPos[annotIndex]?.[0] ?? [];\n          [posData, nMcidData] = annotBBoxesAndOpPos[annotIndex]?.[1] ?? [[], []];\n        }\n\n        if (bbox.mcidList) {\n          bbox.location = parseMcidToBbox(\n            bbox.mcidList,\n            posData,\n            annotsFormatted,\n            page.view,\n            page.rotate,\n            left,\n            bottom,\n          );\n          if (_.isEmpty(bbox.location)) {\n            return null;\n          }\n        } else if (bbox.contentItemPath) {\n          const contentItemsPath = bbox.contentItemPath.slice(2);\n          let contentItemsBBoxes = nMcidData[bbox.contentItemPath[1]];\n          try {\n            contentItemsPath.forEach((ci, i) => {\n              if (contentItemsPath.length > i + 1 || !contentItemsBBoxes.final) {\n                contentItemsBBoxes = contentItemsBBoxes.contentItems[0];\n              }\n              contentItemsBBoxes = contentItemsBBoxes.contentItems[ci];\n            });\n\n            bbox.location = [\n              contentItemsBBoxes.contentItem.x + left,\n              contentItemsBBoxes.contentItem.y + bottom,\n              contentItemsBBoxes.contentItem.w,\n              contentItemsBBoxes.contentItem.h\n            ];\n          } catch (err) {\n            console.log('NoMCIDDataParseError:', err.message || err);\n            bbox.location = [0, 0, 0, 0];\n          }\n        }\n        if (_.isNumber(bbox.operatorIndex) && _.isNumber(bbox.glyphIndex)) {\n          bbox.location = getBboxForGlyph(bbox.operatorIndex, bbox.glyphIndex, opData, page.view, page.rotate, left, bottom);\n        }\n\n        return bbox;\n      });\n      setBboxesAll(allBboxes);\n      setBboxesErrors(errorBboxes);\n    });\n  },[props.bboxList, props.treeElementsBboxes])\n  \n  const onPageLoadSuccess = useCallback((page: PageCallback) => {\n    setIsRendered(true);\n    setPageViewport(page.view);\n    createBBoxes(page);\n    pageRef.current= page;\n    props.onPageLoadSuccess?.(page);\n  }, [bboxList, props.treeElementsBboxes, props.width, props.height, scale]);\n\n  useEffect(() => {\n    if (bboxList.length) {\n      setBboxesErrors((prev) => _.map(prev, (bbox, index) => {\n        if (_.isNil(bbox)) return null;\n        return {\n          ...bbox,\n          isVisible: bboxList[index].hasOwnProperty('isVisible') ? bboxList[index].isVisible : true,\n        };\n      }));\n    }\n  }, [bboxList]);\n  useEffect(() => {\n    if (!loaded && isIntersecting) {\n      setLoaded(true);\n    }\n    props.onPageInViewport?.(props.page, { isIntersecting, intersectionRatio });\n  }, [isIntersecting, intersectionRatio, loaded]);\n  useEffect(() => {\n    if (scrollIntoPage === props.page) {\n      (intersectionRef.current as unknown as HTMLElement)?.scrollIntoView();\n    }\n  }, [scrollIntoPage]);\n  useEffect(() => {\n    const width = pageViewport[2] - pageViewport[0];\n    const height = pageViewport[3] - pageViewport[1];\n    if (props.width && width) {\n      return setPageScale((props.width / width) * scale);\n    } else if (props.height && height) {\n      return setPageScale((props.height / height) * scale);\n    }\n\n    setPageScale(scale);\n  }, [pageViewport, scale, props.width, props.height]);\n\n  const isBboxSelected = useCallback((bbox: IBbox) => {\n    const isBboxMode = !_.isNil(props.activeBboxIndex);\n    const isErrorBboxSelected = bbox.index === props.activeBboxIndex;\n    let isStructureBboxSelected;\n    switch (props.treeBboxSelectionMode) {\n      case TreeBboxSelectionMode.SELECTED_WITH_KIDS: {\n        isStructureBboxSelected = bbox?.id === props?.activeBboxId || bbox?.id?.startsWith(`${props?.activeBboxId}:`);\n        break;\n      }\n      case TreeBboxSelectionMode.SELECTED:\n      default: isStructureBboxSelected = bbox?.id === props?.activeBboxId;\n    }\n    return isBboxMode ? isErrorBboxSelected : isStructureBboxSelected;\n  }, [props.activeBboxIndex, props.activeBboxId]);\n  const isBboxRelated = useCallback((bbox: IBbox) => {\n    const [, , activeId] = props?.groupId?.split('-') || [];\n    const [, , bboxId] = bbox?.groupId?.split('-') || [];\n    return props.groupId ? activeId === bboxId && !isBboxSelected(bbox) : false;\n  }, [props.groupId, isBboxSelected]);\n  const isBboxStructured = useCallback((bbox: IBbox) => _.isNil(bbox.index), []);\n  const isBboxDisabled = useCallback((bbox: IBbox) => {\n    if (_.isNil(bbox)) return true;\n    if (bbox.hasOwnProperty('isVisible')) return !bbox.isVisible;\n    return !props.isTreeBboxesVisible;\n  }, [props.isTreeBboxesVisible]);\n\n  const bboxes = useMemo(() => {\n    /*\n      Sorting bboxes in descending order of area\n      Note: if the area of error bbox equal to the area of structure bbox,\n      then we assume that the structure bbox has a larger area\n    */\n    return [...bboxesAll, ...cleanArray(bboxesErrors)].sort(\n      ({ location: locationAll }, { location: locationError }) => {\n        const getArea = (arr: Array<number | string>): number => _.round(+arr[2], 4) * _.round(+arr[3], 4);\n        const areaAll = locationAll ? getArea(locationAll) : 0;\n        const areaError = locationError ? getArea(locationError) : 0;\n        return areaAll < areaError ? 1 : (areaAll > areaError ? -1 : 0);\n    }) as IBbox[];\n  }, [bboxesErrors, bboxesAll]);\n  const activeBboxes = useMemo(() => bboxes.filter((bbox) => {\n    const isBboxMode = !_.isNil(props.activeBboxIndex);\n    return isBboxMode ? bbox.index === props.activeBboxIndex : bbox?.id === props?.activeBboxId\n  }), [props.activeBboxIndex, props.activeBboxId]);\n\n  useEffect(\n    useCallback(() => {\n      if (activeBboxes && activeBboxes.length && activeBboxes.every((activeBbox) => checkIsBboxOutOfThePage(activeBbox, scale, props.page))) {\n        props.onWarning?.(WARNING_CODES.BBOX_OUT_OF_THE_PAGE_VIEWPORT);\n      }\n    }, [activeBboxes, scale, props.page]),\n  [activeBboxes]);\n\n  /**\n   * Effect hook that updates the errors map and bboxes state when the bboxList changes.\n   *\n   * @description This effect is triggered when the bboxList or bboxes dependencies change.\n   * It checks if the bboxList has changed since the previous render and if the pageRef is not null.\n   * If both conditions are true, it updates the prevBboxList and creates an errors map for the pageRef.\n   * If the bboxList is empty and bboxes is not empty, it resets the bboxesErrors and bboxesAll states.\n   *\n   * @param {Array} bboxList - The list of bounding boxes.\n   * @param {Array} bboxes - The list of final bounding boxes to be rendered.\n   * @param {Object} pageRef - The reference to the page element.\n   * @param {Array} prevBboxList - The previous list of bounding boxes.\n   * @param {Function} setBboxesErrors - The function to update the bboxesErrors state.\n   * @param {Function} setBboxesAll - The function to update the bboxesAll state.\n   */\n  useEffect(() => {\n    const isSameAsPrev = _.isEqual(prevBboxList.current, bboxList);\n\n    if (bboxList.length && !isSameAsPrev && !_.isNil(pageRef.current)) {\n      prevBboxList.current = bboxList;\n      createBBoxes(pageRef.current);\n    }\n    if (!bboxList.length && bboxes.length) {\n      setBboxesErrors([]);\n      setBboxesAll([]);\n    }\n  }, [bboxList, bboxes]);\n\n  return (\n    <StyledPdfPage\n      className={`pdf-page pdf-page_rendered${props.isPageSelected ? ' pdf-page_selected' : ''}`}\n      data-page={props.page}\n      onClick={onPageClick}\n      height={!isRendered ? props.height || props.defaultHeight : undefined}\n      width={!isRendered ? props.width || props.defaultWidth : undefined}\n      scale={pageScale}\n      ref={intersectionRef}\n      colorScheme={props.colorScheme || {}}\n    >\n      {loaded ? <>\n        <Page\n          pageNumber={props.page}\n          error={props.pageError}\n          height={props.height}\n          width={props.width}\n          loading={props.pageLoading}\n          inputRef={props.inputRef}\n          renderAnnotationLayer={props.renderAnnotationLayer}\n          renderForms={props.renderInteractiveForms}\n          renderTextLayer={props.renderTextLayer}\n          scale={props.scale}\n          onLoadError={props.onPageLoadError}\n          onLoadSuccess={onPageLoadSuccess}\n          onRenderError={props.onPageRenderError}\n          onRenderSuccess={onPageRenderSuccess}\n          onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\n          onGetAnnotationsError={props.onGetAnnotationsError}\n          onGetTextSuccess={props.onGetTextSuccess}\n          onGetTextError={props.onGetTextError}\n          customTextRenderer={props.customTextRenderer}\n        />\n        {isRendered ? bboxes.map((bbox: IBbox, index) => (\n          <Bbox\n            key={index}\n            bbox={bbox}\n            onClick={onBboxClick(bbox.index, bbox.id)}\n            disabled={isBboxDisabled(bbox)}\n            structured={isBboxStructured(bbox)}\n            selected={isBboxSelected(bbox)}\n            related={isBboxRelated(bbox)}\n            scale={pageScale}\n            selectionMode={props.treeBboxSelectionMode}\n            colorScheme={props.colorScheme}\n          />\n        )) : null}\n      </> : null}\n    </StyledPdfPage>\n  );\n}\n\nexport default memo(PdfPage);\n","import React, { FC, memo, useCallback, useMemo, useState, useContext, useEffect } from 'react';\nimport { Document } from 'react-pdf';\nimport { DocumentCallback, PageCallback } from 'react-pdf/src/shared/types';\nimport 'react-pdf/dist/esm/Page/AnnotationLayer.css';\nimport 'react-pdf/dist/esm/Page/TextLayer.css';\nimport { useDebounce } from 'react-use';\nimport _ from 'lodash';\n\nimport { IDocumentProps } from './IDocumentProps';\nimport { IPageProps } from '../pdfPage/IPageProps';\nimport PdfPage from '../pdfPage/PdfPage';\nimport { ViewerContext } from '../viewerContext/ViewerContext';\nimport { TreeBboxSelectionMode } from '../../enums/treeBboxSelectionMode';\nimport { AnyObject, OrNull } from '../../types/generics';\nimport { TSelectedBboxData } from '../../types/selectedBboxData';\nimport { IBboxLocation } from '../../index';\nimport {\n  activeBboxInViewport,\n  buildBboxMap,\n  parseTree,\n  setTreeIds,\n  structurizeTree,\n  getMcidList,\n  createBboxMap,\n  getSelectedPageByLocation,\n  getBboxPages,\n  scrollToActiveBbox\n} from '../../services/bboxService';\nimport { IColorScheme } from '../bbox/Bbox';\n\nimport './pdfDocument.scss';\n\ninterface IDocumentData extends DocumentCallback {\n  _pdfInfo: {\n    structureTree: AnyObject;\n  }\n  parsedTree?: AnyObject;\n}\n\nexport interface IPdfDocumentProps extends IDocumentProps, IPageProps {\n  showAllPages?: boolean;\n  activeBboxIndex?: number;\n  activeBboxId?: string;\n  bboxes: IBboxLocation[];\n  isTreeBboxesVisible: boolean;\n  treeBboxSelectionMode?: TreeBboxSelectionMode;\n  colorScheme?: IColorScheme;\n  onBboxesParsed?(pages: number[]): void;\n  onPageChange?(page: number): void;\n  onWarning?(warningCode: string): void;\n  onSelectBbox(index: number | undefined): void;\n  pageIntersectionThreshold?: number[];\n}\n\nconst PdfDocument: FC<IPdfDocumentProps> = (props) => {\n  const { page, setPage, maxPage, setMaxPage, scrollIntoPage, setScrollIntoPage } = useContext(ViewerContext);\n  const { bboxes = [] } = props;\n  const [loaded, setLoaded] = useState(false);\n  const [structureTree, setStructureTree] = useState({});\n  const [parsedTree, setParsedTree] = useState({});\n  const [bboxMap, setBboxMap] = useState({});\n  const [treeElementsBboxes, setTreeElementsBboxes] = useState({});\n  const [pagesByViewport, setPagesByViewport] = useState<number[]>([]);\n  const [ratioArray, setRatioArray] = useState<number[]>([]);\n  const [defaultHeight, setDefaultHeight] = useState(0);\n  const [defaultWidth, setDefaultWidth] = useState(0);\n  const [selectedPage, setSelectedPage] = useState<number | undefined>(undefined);\n  const activeBbox = useMemo(() => {\n    return props.activeBboxIndex !== undefined ? bboxes[props.activeBboxIndex] : null\n  }, [props.activeBboxIndex, bboxes]);\n  const shownPages: number[] = useMemo(() => {\n    if (props.showAllPages) {\n      return Array.from(\n        new Array(maxPage),\n        (_el, index) => index + 1,\n      );\n    }\n\n    return [props.page || 1];\n  }, [maxPage, props.showAllPages, props.page]);\n\n  useEffect(() => {\n    setBboxMap(buildBboxMap(bboxes, structureTree));\n    props.onBboxesParsed?.(getBboxPages(bboxes, structureTree));\n  }, [bboxes, structureTree]);\n\n  useEffect(() => {\n    const mcidList = getMcidList(parsedTree ?? {});\n    setTreeElementsBboxes(createBboxMap(mcidList));\n  }, [parsedTree]);\n\n  useEffect(() => {\n    const isBboxMode = !_.isNil(props.activeBboxIndex);\n    const id = isBboxMode ? props.activeBboxIndex : props.activeBboxId;\n    if ((id ?? false) === false) {\n      return;\n    }\n    const entries = Object.entries(isBboxMode ? bboxMap : treeElementsBboxes);\n    const finder = isBboxMode \n        ? (value: AnyObject[]) => _.find(value, { index: props.activeBboxIndex })\n        : (value: [AnyObject[], string]) => _.find(value, arr => arr[1] === props.activeBboxId);\n    let bboxPage = 0;\n    for (const [key, value] of entries) {\n      if (finder(value as AnyObject[] & [AnyObject[], string])) {\n        bboxPage = parseInt(key);\n        break;\n      }\n    }\n    if (bboxPage > 0 && !activeBboxInViewport()) {\n      setScrollIntoPage(bboxPage);\n      // To be sure that page is loaded before scrolling to the active bbox\n      setTimeout(() => scrollToActiveBbox(), 100);\n    }\n  }, [props.activeBboxIndex, props.activeBboxId, bboxMap, treeElementsBboxes])\n\n  useEffect(() => {\n    if (activeBbox) {\n      const selectedPage = getSelectedPageByLocation(activeBbox.location);\n      if (selectedPage > -1) {\n        setPage(selectedPage);\n      }\n      setSelectedPage(selectedPage);\n    } else {\n      setSelectedPage(undefined);\n    }\n  }, [activeBbox]);\n\n  const onDocumentLoadSuccess = useCallback(async (data: IDocumentData) => {\n    setStructureTree(data._pdfInfo.structureTree);\n    const parsedTree = parseTree(_.cloneDeep(data._pdfInfo.structureTree));\n    const treeWithData = structurizeTree(parsedTree);\n    const [treeWithIds, annotMap] = setTreeIds(treeWithData ?? {});\n    if (!_.isNil(treeWithIds)) treeWithIds.annotMap = annotMap;\n    setParsedTree(treeWithIds ?? {});\n    data.parsedTree = treeWithIds ?? {};\n    const pageData = await data.getPage(1);\n    setDefaultHeight(pageData.view[3]);\n    setDefaultWidth(pageData.view[2]);\n    setMaxPage(data.numPages);\n    setLoaded(true);\n    props.onLoadSuccess?.(data);\n  }, [props.onLoadSuccess, bboxes]);\n  const onPageLoadSuccess = useCallback((data: PageCallback) => {\n    props.onPageLoadSuccess?.(data);\n  }, [props.onPageLoadSuccess]);\n\n  const onPageInViewport = useCallback((page: number, intersection: { isIntersecting: boolean, intersectionRatio: number }) => {\n    if (props.showAllPages) {\n      setPageByViewport(page, intersection);\n    } else {\n      setPage(page);\n    }\n  }, [maxPage, props.showAllPages]);\n  const onBboxClick = useCallback((data: OrNull<TSelectedBboxData>) => {\n      props.onBboxClick?.(data);\n  }, []);\n\n  const setPageByViewport = useMemo(() => (newPage: number, intersection: { isIntersecting: boolean, intersectionRatio: number }) => {\n    const { isIntersecting, intersectionRatio } = intersection;\n    if (isIntersecting) {\n      if (!pagesByViewport.includes(newPage)) {\n        pagesByViewport.push(newPage);\n        ratioArray.push(intersectionRatio);\n        setPagesByViewport(pagesByViewport);\n        setRatioArray(ratioArray);\n      } else {\n        ratioArray[pagesByViewport.indexOf(newPage)] = intersectionRatio;\n        setRatioArray(ratioArray);\n      }\n    } else {\n      if (pagesByViewport.includes(newPage)) {\n        const prevPageIndex = pagesByViewport.indexOf(newPage);\n        pagesByViewport.splice(prevPageIndex, 1);\n        setPagesByViewport(pagesByViewport);\n        ratioArray.splice(prevPageIndex, 1);\n        setRatioArray(ratioArray);\n      }\n    }\n\n    let newPageIndex = -1;\n    pagesByViewport.forEach((_pageFromViewport, index) => {\n      if (newPageIndex === -1) {\n        newPageIndex = index;\n      }\n\n      if (ratioArray[newPageIndex] < ratioArray[index]) {\n        newPageIndex = index;\n      }\n    });\n\n    if (newPageIndex !== -1 && pagesByViewport[newPageIndex]) {\n      setPage(pagesByViewport[newPageIndex]);\n      if (scrollIntoPage) {\n        setScrollIntoPage(0);\n      }\n    }\n  }, [pagesByViewport, page, ratioArray, scrollIntoPage]);\n  useDebounce(() => {\n    if (props.page !== page) props.onPageChange?.(page)\n  }, 30, [page]);\n\n  useEffect(() => {\n    if (page !== props.page) {\n      setPage(props.page || 1);\n      if (props.showAllPages) {\n        setScrollIntoPage(props.page);\n      }\n    }\n  }, [props.page, props.showAllPages]);\n\n  useEffect(() => {\n    setLoaded(false);\n    setPagesByViewport([]);\n    setRatioArray([]);\n    setDefaultHeight(0);\n    setDefaultWidth(0);\n    setMaxPage(0);\n    setPage(1);\n  }, [props.file]);\n\n  useEffect(() => {\n    function handlekeydownEvent(event: any) {\n      if ((event.ctrlKey || event.metaKey) && event.key === 'ArrowUp') {\n        props.onSelectBbox((_.isNil(props.activeBboxIndex) || props.activeBboxIndex === -1 || props.activeBboxIndex === 0) ? 0 : props.activeBboxIndex - 1);\n      } else if ((event.ctrlKey || event.metaKey) && event.key === 'ArrowDown') {\n        props.onSelectBbox((props.activeBboxIndex === -1 || _.isNil(props.activeBboxIndex)) ? 0 :\n            (props.activeBboxIndex + 1 === bboxes.length) ? props.activeBboxIndex : props.activeBboxIndex + 1);\n      } else if (event.key === 'ArrowLeft' && (props.page - 1 > 0)) {\n        props.onPageChange?.(props.page - 1);\n      } else if (event.key === 'ArrowRight' && props.page !== maxPage) {\n        props.onPageChange?.(props.page + 1);\n      }\n    }\n\n    document.addEventListener('keydown', handlekeydownEvent)\n    return () => {\n      document.removeEventListener('keydown', handlekeydownEvent)\n    }\n  }, [props.activeBboxIndex, props.page, maxPage]);\n\n  return (\n    <Document\n      className=\"pdf-document\"\n      file={props.file}\n      onLoadSuccess={onDocumentLoadSuccess}\n      onLoadError={props.onLoadError}\n      externalLinkTarget={props.externalLinkTarget}\n      error={props.error}\n      loading={props.loading}\n      noData={props.noData}\n      onItemClick={props.onItemClick}\n      rotate={props.rotate}\n    >\n      {useMemo(() => loaded ? shownPages.map((page) => <PdfPage\n          defaultHeight={defaultHeight}\n          defaultWidth={defaultWidth}\n          key={page}\n          page={page}\n          pageError={props.pageError}\n          inputRef={props.inputRef}\n          height={props.height}\n          width={props.width}\n          pageLoading={props.pageLoading}\n          renderAnnotationLayer={props.renderAnnotationLayer}\n          renderInteractiveForms={props.renderInteractiveForms}\n          renderTextLayer={props.renderTextLayer}\n          scale={props.scale}\n          onPageLoadError={props.onPageLoadError}\n          onPageLoadSuccess={onPageLoadSuccess}\n          onPageRenderError={props.onPageRenderError}\n          onPageRenderSuccess={props.onPageRenderSuccess}\n          onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\n          onGetAnnotationsError={props.onGetAnnotationsError}\n          onGetTextSuccess={props.onGetTextSuccess}\n          onGetTextError={props.onGetTextError}\n          onPageInViewport={onPageInViewport}\n          bboxList={bboxMap[page]}\n          treeElementsBboxes={treeElementsBboxes[page]}\n          treeBboxSelectionMode={props.treeBboxSelectionMode}\n          groupId={bboxes[props.activeBboxIndex as number]?.groupId}\n          activeBboxIndex={props.activeBboxIndex}\n          activeBboxId={props.activeBboxId}\n          isTreeBboxesVisible={props.isTreeBboxesVisible}\n          onBboxClick={onBboxClick}\n          colorScheme={props.colorScheme}\n          isPageSelected={selectedPage === page}\n          onWarning={props.onWarning}\n          pageIntersectionThreshold={props.pageIntersectionThreshold}\n        />\n      ) : null, [loaded, shownPages, defaultHeight, defaultWidth, bboxMap, treeElementsBboxes, props, selectedPage])}\n    </Document>\n  );\n}\n\nexport default memo(PdfDocument);\n","import React, { FC, ReactElement } from 'react';\n\nimport PdfDocument, { IPdfDocumentProps } from './components/pdfDocument/PdfDocument';\nimport ViewerProvider from './components/viewerContext/ViewerContext';\nimport { scrollToActiveBbox } from './services/bboxService';\nimport { IRenderBboxProps } from \"./components/bbox/Bbox\";\n\nimport './styles.scss'\n\nexport interface IBboxLocation {\n  page: number;\n  location: string;\n  isVisible?: boolean;\n  groupId?: string;\n  bboxTitle?: string;\n}\n\ninterface IPdfViewerProps extends IPdfDocumentProps {\n  bboxes: IBboxLocation[];\n  className?: string;\n  renderBbox?: (props: IRenderBboxProps) => ReactElement;\n}\n\nconst App: FC<IPdfViewerProps> = (props) => {\n  const { className = '', bboxes = [], renderBbox, ...pdfProps } = props;\n\n  return (\n    <ViewerProvider renderBbox={renderBbox}>\n      <div className={`pdf-viewer ${className}`} role=\"button\" tabIndex={0}>\n        <PdfDocument {...pdfProps} bboxes={bboxes}/>\n      </div>\n    </ViewerProvider>\n  );\n}\n\nexport {\n  scrollToActiveBbox,\n}\n\nexport default App\n"],"names":["createContext","useState","React","bboxBorderHover","styled","useContext","useMemo","memo","_","useRef","useIntersection","useCallback","useEffect","Page","Bbox","useDebounce","Document","PdfPage","PdfDocument"],"mappings":"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"}